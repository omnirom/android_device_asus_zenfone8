#
# Copyright (C) 2019 The LineageOS Project
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

set -e

# Load extract_utils and do some sanity checks
MY_DIR="${BASH_SOURCE%/*}"
if [[ ! -d "$MY_DIR" ]]; then MY_DIR="$PWD"; fi

CM_ROOT="$MY_DIR"/../../..

HELPER="$CM_ROOT"/vendor/omni/build/tools/extract_utils.sh

if [ ! -f "$HELPER" ]; then
    echo "Unable to find helper script at $HELPER"
    exit 1
fi
. "$HELPER"

if [ -z "$1" ]; then
    echo "No input image supplied"
    exit 1
fi

if [ -z "$2" ]; then
    echo "No output filename supplied"
    exit 1
fi

VENDOR_SKIP_FILES_COMMON=(
    # Asus setenforce
    "bin/sar_setting"
    "bin/savelogs.sh"
    "bin/savelogmtp.sh"
    "bin/setenforce.sh"
    "bin/widevine.sh"

    # Audio
    "etc/a2dp_audio_policy_configuration.xml"
    "etc/acdbdata/CDP/CDP_Bluetooth_cal.acdb"
    "etc/acdbdata/CDP/CDP_General_cal.acdb"
    "etc/acdbdata/CDP/CDP_Global_cal.acdb"
    "etc/acdbdata/CDP/CDP_Handset_cal.acdb"
    "etc/acdbdata/CDP/CDP_Hdmi_cal.acdb"
    "etc/acdbdata/CDP/CDP_Headset_cal.acdb"
    "etc/acdbdata/CDP/CDP_Speaker_cal.acdb"
    "etc/acdbdata/CDP/CDP_workspaceFile.qwsp"
    "etc/acdbdata/IDP/IDP_Shima_Bluetooth_cal.acdb"
    "etc/acdbdata/IDP/IDP_Shima_General_cal.acdb"
    "etc/acdbdata/IDP/IDP_Shima_Global_cal.acdb"
    "etc/acdbdata/IDP/IDP_Shima_Handset_cal.acdb"
    "etc/acdbdata/IDP/IDP_Shima_Hdmi_cal.acdb"
    "etc/acdbdata/IDP/IDP_Shima_Headset_cal.acdb"
    "etc/acdbdata/IDP/IDP_Shima_Speaker_cal.acdb"
    "etc/acdbdata/IDP/IDP_Shima_workspaceFile.qwsp"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_Bluetooth_cal.acdb"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_General_cal.acdb"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_Global_cal.acdb"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_Handset_cal.acdb"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_Hdmi_cal.acdb"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_Headset_cal.acdb"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_Speaker_cal.acdb"
    "etc/acdbdata/IDP/lahaina-shimaidps-snd-card/IDPS_Shima_workspaceFile.qwsp"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_Bluetooth_cal.acdb"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_General_cal.acdb"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_Global_cal.acdb"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_Handset_cal.acdb"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_Hdmi_cal.acdb"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_Headset_cal.acdb"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_Speaker_cal.acdb"
    "etc/acdbdata/IDP/lahaina-yupikidp-snd-card/IDP_Yupik_workspaceFile.qwsp"
    "etc/acdbdata/MTP/MTP_Bluetooth_cal.acdb"
    "etc/acdbdata/MTP/MTP_General_cal.acdb"
    "etc/acdbdata/MTP/MTP_Global_cal.acdb"
    "etc/acdbdata/MTP/MTP_Handset_cal.acdb"
    "etc/acdbdata/MTP/MTP_Hdmi_cal.acdb"
    "etc/acdbdata/MTP/MTP_Headset_cal.acdb"
    "etc/acdbdata/MTP/MTP_Speaker_cal.acdb"
    "etc/acdbdata/MTP/MTP_workspaceFile.qwsp"
    "etc/acdbdata/QRD/QRD_Bluetooth_cal.acdb"
    "etc/acdbdata/QRD/QRD_General_cal.acdb"
    "etc/acdbdata/QRD/QRD_Global_cal.acdb"
    "etc/acdbdata/QRD/QRD_Handset_cal.acdb"
    "etc/acdbdata/QRD/QRD_Hdmi_cal.acdb"
    "etc/acdbdata/QRD/QRD_Headset_cal.acdb"
    "etc/acdbdata/QRD/QRD_Speaker_cal.acdb"
    "etc/acdbdata/QRD/QRD_workspaceFile.qwsp"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_Bluetooth_cal.acdb"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_General_cal.acdb"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_Global_cal.acdb"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_Handset_cal.acdb"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_Hdmi_cal.acdb"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_Headset_cal.acdb"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_Speaker_cal.acdb"
    "etc/acdbdata/QRD/lahaina-shimaqrd-snd-card/QRD_Shima_workspaceFile.qwsp"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_Bluetooth_cal.acdb"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_General_cal.acdb"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_Global_cal.acdb"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_Handset_cal.acdb"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_Hdmi_cal.acdb"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_Headset_cal.acdb"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_Speaker_cal.acdb"
    "etc/acdbdata/QRD/lahaina-yupikqrd-snd-card/QRD_Yupik_workspaceFile.qwsp"
    "etc/audio/ZS590KS/audio_policy_configuration_ZS590KS.xml"
    "etc/audio/ZS590KS/audio_policy_volumes_ZS590KS.xml"
    "etc/audio/audio_policy_configuration.xml"
    "etc/audio/sku_lahaina/audio_policy_configuration.xml"
    "etc/audio/sku_lahaina/audio_policy_volumes.xml"
    "etc/audio/sku_lahaina/audio_platform_info_intcodec.xml"
    "etc/audio/sku_lahaina/sound_trigger_mixer_paths.xml"
    "etc/audio/sku_lahaina/sound_trigger_mixer_paths_cdp.xml"
    "etc/audio/sku_lahaina/sound_trigger_mixer_paths_hdk.xml"
    "etc/audio/sku_lahaina/sound_trigger_mixer_paths_hhg.xml"
    "etc/audio/sku_lahaina/sound_trigger_mixer_paths_qrd.xml"
    "etc/audio/sku_lahaina_qssi/audio_policy_configuration.xml"
    "etc/audio/sku_shima/audio_effects.conf"
    "etc/audio/sku_shima/audio_effects.xml"
    "etc/audio/sku_shima/audio_io_policy.conf"
    "etc/audio/sku_shima/audio_platform_info_intcodec.xml"
    "etc/audio/sku_shima/audio_platform_info_shimaidp.xml"
    "etc/audio/sku_shima/audio_platform_info_shimaqrd.xml"
    "etc/audio/sku_shima/audio_policy_configuration.xml"
    "etc/audio/sku_shima/audio_policy_volumes.xml"
    "etc/audio/sku_shima/audio_tuning_mixer.txt"
    "etc/audio/sku_shima/default_volume_tables.xml"
    "etc/audio/sku_shima/mixer_paths_shimaidp.xml"
    "etc/audio/sku_shima/mixer_paths_shimaidps.xml"
    "etc/audio/sku_shima/mixer_paths_shimaqrd.xml"
    "etc/audio/sku_shima/r_submix_audio_policy_configuration.xml"
    "etc/audio/sku_shima/sound_trigger_mixer_paths_shimaidp.xml"
    "etc/audio/sku_shima/sound_trigger_mixer_paths_shimaidps.xml"
    "etc/audio/sku_shima/sound_trigger_mixer_paths_shimaqrd.xml"
    "etc/audio/sku_shima/sound_trigger_platform_info.xml"
    "etc/audio/sku_shima_qssi/audio_policy_configuration.xml"
    "etc/audio/sku_yupik/audio_effects.conf"
    "etc/audio/sku_yupik/audio_effects.xml"
    "etc/audio/sku_yupik/audio_io_policy.conf"
    "etc/audio/sku_yupik/audio_platform_info_intcodec.xml"
    "etc/audio/sku_yupik/audio_platform_info_yupikidp.xml"
    "etc/audio/sku_yupik/audio_platform_info_yupikqrd.xml"
    "etc/audio/sku_yupik/audio_policy_configuration.xml"
    "etc/audio/sku_yupik/audio_policy_volumes.xml"
    "etc/audio/sku_yupik/audio_tuning_mixer.txt"
    "etc/audio/sku_yupik/default_volume_tables.xml"
    "etc/audio/sku_yupik/mixer_paths_yupikidp.xml"
    "etc/audio/sku_yupik/mixer_paths_yupikqrd.xml"
    "etc/audio/sku_yupik/r_submix_audio_policy_configuration.xml"
    "etc/audio/sku_yupik/sound_trigger_mixer_paths_yupikidp.xml"
    "etc/audio/sku_yupik/sound_trigger_mixer_paths_yupikqrd.xml"
    "etc/audio/sku_yupik/sound_trigger_platform_info.xml"
    "etc/audio/sku_yupik_qssi/audio_policy_configuration.xml"
    "etc/audio_effects.conf"
    "etc/audio_effects.xml"
    "etc/audio_io_policy.conf"
    "etc/audio_platform_info.xml"
    "etc/audio_platform_info_hdk.xml"
    "etc/audio_platform_info_intcodec.xml"
    "etc/audio_platform_info_qrd.xml"
    "etc/audio_policy_configuration.xml"
    "etc/audio_policy_volumes.xml"
    "etc/bluetooth_qti_audio_policy_configuration.xml"
    "etc/bluetooth_qti_hearing_aid_audio_policy_configuration.xml"
    # Use prebuilt audio.primary.lahaina
    # "lib/hw/audio.primary.lahaina.so"
    # "lib64/hw/audio.primary.lahaina.so"
    "bin/hw/android.hardware.audio.service"
    "etc/init/android.hardware.audio.service.rc"
    "lib/android.hardware.audio.common-util.so"
    "lib/android.hardware.audio.common@2.0-util.so"
    "lib/android.hardware.audio.common@4.0-util.so"
    "lib/android.hardware.audio.common@5.0-util.so"
    "lib/android.hardware.audio.common@6.0-util.so"
    "lib/hw/android.hardware.audio.effect@2.0-impl.so"
    "lib/hw/android.hardware.audio.effect@4.0-impl.so"
    "lib/hw/android.hardware.audio.effect@5.0-impl.so"
    "lib/hw/android.hardware.audio.effect@6.0-impl.so"
    "lib/hw/android.hardware.audio@2.0-impl.so"
    "lib/hw/android.hardware.audio@4.0-impl.so"
    "lib/hw/android.hardware.audio@5.0-impl.so"
    "lib/hw/android.hardware.audio@6.0-impl.so"
    "lib64/android.hardware.audio.common-util.so"
    "lib64/android.hardware.audio.common@2.0-util.so"
    "lib64/android.hardware.audio.common@4.0-util.so"
    "lib64/android.hardware.audio.common@5.0-util.so"
    "lib64/android.hardware.audio.common@6.0-util.so"
    "lib64/hw/android.hardware.audio.effect@2.0-impl.so"
    "lib64/hw/android.hardware.audio.effect@4.0-impl.so"
    "lib64/hw/android.hardware.audio.effect@5.0-impl.so"
    "lib64/hw/android.hardware.audio.effect@6.0-impl.so"
    "lib64/hw/android.hardware.audio@2.0-impl.so"
    "lib64/hw/android.hardware.audio@4.0-impl.so"
    "lib64/hw/android.hardware.audio@5.0-impl.so"
    "lib64/hw/android.hardware.audio@6.0-impl.so"
    "lib/hw/audio.primary.default.so"
    "lib64/hw/audio.primary.default.so"
    #"lib/hw/audio.r_submix.default.so"
    #"lib/hw/audio.usb.default.so"
    #"lib64/hw/audio.r_submix.default.so"
    #"lib64/hw/audio.usb.default.so"
    "lib/libeffects.so"
    "lib/libeffectsconfig.so"
    "lib64/libeffects.so"
    "lib64/libeffectsconfig.so"
    "lib/libnbaio_mono.so"
    "lib64/libnbaio_mono.so"

    # Binary
    "bin/acpi"
    "bin/applypatch"
    "bin/asus_mediaflag.sh"
    "bin/base64"
    "bin/basename"
    "bin/boringssl_self_test32"
    "bin/boringssl_self_test64"
    "bin/btnvtool"
    "bin/blockdev"
    "bin/cal"
    "bin/cat"
    "bin/chattr"
    "bin/chcon"
    "bin/checkpoint_gc"
    "bin/chgrp"
    "bin/chmod"
    "bin/chown"
    "bin/chroot"
    "bin/chrt"
    "bin/cksum"
    "bin/clear"
    "bin/cmp"
    "bin/comm"
    "bin/cp"
    "bin/cpio"
    "bin/cut"
    "bin/country.sh"
    "bin/cplay"
    "bin/csc/erase_batinfo.sh"
    "bin/csc/restore_batinfo.sh"
    "bin/cscclearlog.sh"
    "bin/ddr_info.sh"
    "bin/debug-diag"
    "bin/date"
    "bin/dd"
    "bin/df"
    "bin/diff"
    "bin/dirname"
    "bin/devmem"
    "bin/dmesg"
    "bin/dos2unix"
    "bin/du"
    "bin/echo"
    "bin/egrep"
    "bin/env"
    "bin/expand"
    "bin/expr"
    "bin/fallocate"
    "bin/false"
    "bin/fastrpc_tests_apps"
    "bin/fastrpc_tests_apps32"
    "bin/firmware_version.sh"
    "bin/fgrep"
    "bin/file"
    "bin/find"
    "bin/flock"
    "bin/fmt"
    "bin/free"
    "bin/fsync"
    "bin/getconf"
    "bin/getenforce"
    "bin/getevent"
    "bin/getprop"
    "bin/groups"
    "bin/gunzip"
    "bin/gzip"
    "bin/head"
    "bin/hostname"
    "bin/hwclock"
    "bin/i2cdetect"
    "bin/i2cdump"
    "bin/i2cget"
    "bin/i2cset"
    "bin/iconv"
    "bin/id"
    "bin/ifconfig"
    "bin/inotifyd"
    "bin/insmod"
    "bin/install"
    "bin/install_key_server"
    "bin/ionice"
    "bin/iorenice"
    "bin/irsc_util"
    "bin/is_hdcp_valid"
    "bin/is_keybox_valid"
    "bin/is_keymaster_valid"
    "bin/kill"
    "bin/killall"
    "bin/ln"
    "bin/load_policy"
    "bin/log"
    "bin/logname"
    "bin/losetup"
    "bin/ls"
    "bin/lsattr"
    "bin/lsmod"
    "bin/lsof"
    "bin/lspci"
    "bin/lsusb"
    "bin/md5sum"
    "bin/microcom"
    "bin/mkdir"
    "bin/mkfifo"
    "bin/mknod"
    "bin/mkswap"
    "bin/mktemp"
    "bin/modinfo"
    "bin/modprobe"
    "bin/more"
    "bin/mount"
    "bin/mountpoint"
    "bin/mv"
    "bin/nc"
    "bin/netcat"
    "bin/netstat"
    "bin/newfs_msdos"
    "bin/nice"
    "bin/nl"
    "bin/nohup"
    "bin/nproc"
    "bin/nsenter"
    "bin/od"
    "bin/paste"
    "bin/patch"
    "bin/pgrep"
    "bin/pidof"
    "bin/pkill"
    "bin/pmap"
    "bin/prepare_asusdebug.sh"
    "bin/printenv"
    "bin/printf"
    "bin/ps"
    "bin/pwd"
    "bin/qmi-framework-tests/qmi_test_mt_client_init_instance"
    "bin/readlink"
    "bin/readelf"
    "bin/realpath"
    "bin/renice"
    "bin/restorecon"
    "bin/rm"
    "bin/rmdir"
    "bin/rmmod"
    "bin/runcon"
    "bin/sed"
    "bin/sendevent"
    "bin/seq"
    "bin/setenforce"
    "bin/setprop"
    "bin/setsid"
    "bin/sha1sum"
    "bin/sha224sum"
    "bin/sha256sum"
    "bin/sha384sum"
    "bin/sha512sum"
    "bin/sleep"
    "bin/sort"
    "bin/split"
    "bin/start"
    "bin/stat"
    "bin/stop"
    "bin/strings"
    "bin/stty"
    "bin/swapoff"
    "bin/swapon"
    "bin/sync"
    "bin/sysctl"
    "bin/tac"
    "bin/tail"
    "bin/tar"
    "bin/taskset"
    "bin/tee"
    "bin/test"
    "bin/test_BinMerge"
    "bin/test_DualCamQcomAECali"
    "bin/test_ShadingCaliForQcom"
    "bin/test_aeCali"
    "bin/test_afCaliDB"
    "bin/test_chkCali"
    "bin/test_diag"
    "bin/test_genCali"
    "bin/test_qafCali"
    "bin/testapp_diag_senddata"
    "bin/time"
    "bin/timeout"
    "bin/top"
    "bin/touch"
    "bin/touch_ver.sh"
    "bin/tr"
    "bin/true"
    "bin/truncate"
    "bin/tty"
    "bin/ulimit"
    "bin/umount"
    "bin/uname"
    "bin/uniq"
    "bin/unix2dos"
    "bin/unlink"
    "bin/unshare"
    "bin/uptime"
    "bin/usleep"
    "bin/uudecode"
    "bin/uuencode"
    "bin/uuidgen"
    "bin/UTSdumpstate.sh"
    "bin/UpdateAttestationKey"
    "bin/UpdateDeviceName"
    "bin/ubwcconvert"
    "bin/ufs_info.sh"
    "bin/vmstat"
    "bin/watch"
    "bin/wc"
    "bin/which"
    "bin/whoami"
    "bin/WifiAntenna.sh"
    "bin/WifiMac.sh"
    "bin/WifiSARPower.sh"
    "bin/xargs"
    "bin/xxd"
    "bin/yes"
    "bin/zcat"

    # Biometrics
    "etc/init/android.hardware.biometrics.fingerprint@2.1-service.rc"
    "etc/init/android.hardware.biometrics.face@1.0-service.faceauth.rc"
    "bin/hw/android.hardware.biometrics.face@1.0-service.faceauth"
    "bin/hw/android.hardware.biometrics.fingerprint@2.1-service"

    # Bootctrl
    "lib/hw/android.hardware.boot@1.0-impl-1.1-qti.so"
    "lib/libboot_control_qti.so"
    "lib64/hw/android.hardware.boot@1.0-impl-1.1-qti.so"
    "lib64/libboot_control_qti.so"
    "bin/hw/android.hardware.boot@1.1-service"
    "etc/init/android.hardware.boot@1.1-service.rc"
    "etc/vintf/manifest/android.hardware.boot@1.1.xml"

    # build.prop for Region specific
    "build_EU.prop"
    "build_EU_2.prop"
    "build_FR.prop"
    "build_JP.prop"
    "build_QC.prop"
    "build_RU.prop"

    # config.fs
    "etc/fs_config_dirs"
    "etc/fs_config_files"
    "etc/group"
    "etc/passwd"

    # fstab
    "etc/fstab.default"
    "etc/fstab.emmc"

    # Init Scripts
    "bin/init.asus.changebinder.sh"
    "bin/init.asus.check_asdf.sh"
    "bin/init.asus.check_last.sh"
    "bin/init.asus.ramdump.sh"
    "bin/init.kernel.post_boot-shima.sh"
    "bin/init.kernel.post_boot-yupik.sh"
    "bin/init.qti.kernel.debug-lahaina.sh"
    "bin/init.qti.kernel.debug-shima.sh"
    "bin/init.qti.kernel.debug-yupik.sh"
    "bin/init.qti.kernel.debug.sh"
    "etc/init/init.asus.demoapp.rc"
    "etc/init/init.asus.osinfo.rc"
    "etc/init/hw/init.asus.rc"
    "etc/init/hw/init.asus.debugtool.rc"
    "etc/init/hw/init.qcom.rc"
    "etc/init/hw/init.target.rc"

    # Launcher
    "etc/workspace_grid_setting.xml"
    "etc/Generic/Launcher/default_workspace/default_allapp.xml"
    "etc/Generic/Launcher/default_workspace/phone_workspace.xml"
    "etc/ID/ASUS/Launcher/default_workspace/default_allapp.xml"
    "etc/ID/ASUS/Launcher/default_workspace/phone_workspace.xml"
    "etc/JP/ACJ/Launcher/default_workspace/default_allapp.xml"
    "etc/JP/ACJ/Launcher/default_workspace/phone_workspace.xml"
    "etc/JP/ASUS/Launcher/default_workspace/default_allapp.xml"
    "etc/JP/ASUS/Launcher/default_workspace/phone_workspace.xml"
    "etc/RU/ASUS/Launcher/default_workspace/default_allapp.xml"
    "etc/RU/ASUS/Launcher/default_workspace/phone_workspace.xml"
    "etc/TW/APTG/Launcher/default_workspace/default_allapp.xml"
    "etc/TW/APTG/Launcher/default_workspace/phone_workspace.xml"
    "etc/TW/ASUS/Launcher/default_workspace/default_allapp.xml"
    "etc/TW/ASUS/Launcher/default_workspace/phone_workspace.xml"
    "etc/US/ASUS/Launcher/default_workspace/default_allapp.xml"
    "etc/US/ASUS/Launcher/default_workspace/phone_workspace.xml"
    "etc/WW/ASUS/Launcher/default_workspace/default_allapp.xml"
    "etc/WW/ASUS/Launcher/default_workspace/phone_workspace.xml"

    # Logs
    "bin/init.asus.checkdatalog.sh"
    "bin/init.asus.checklogsize.sh"
    "bin/init.asus.kernelmessage.sh"
    "bin/init.asus.piq.sh"

    # Manifest
    "etc/vintf/manifest_lahaina.xml"
    "etc/vintf/manifest/manifest.xml"
    "etc/permissions/sku_shima/android.hardware.sensor.accelerometer.xml"
    "etc/permissions/sku_shima/android.hardware.sensor.compass.xml"
    "etc/permissions/sku_shima/android.hardware.sensor.gyroscope.xml"
    "etc/permissions/sku_shima/android.hardware.sensor.light.xml"
    "etc/permissions/sku_shima/android.hardware.sensor.proximity.xml"
    "etc/permissions/sku_shima/android.hardware.sensor.stepcounter.xml"
    "etc/permissions/sku_shima/android.hardware.sensor.stepdetector.xml"
    "etc/permissions/sku_yupik/android.hardware.sensor.accelerometer.xml"
    "etc/permissions/sku_yupik/android.hardware.sensor.compass.xml"
    "etc/permissions/sku_yupik/android.hardware.sensor.gyroscope.xml"
    "etc/permissions/sku_yupik/android.hardware.sensor.light.xml"
    "etc/permissions/sku_yupik/android.hardware.sensor.proximity.xml"
    "etc/permissions/sku_yupik/android.hardware.sensor.stepcounter.xml"
    "etc/permissions/sku_yupik/android.hardware.sensor.stepdetector.xml"

    # Media
    "etc/media_codecs_performance_shima_v1.xml"
    "etc/media_codecs_performance_shima_v2.xml"
    "etc/media_codecs_performance_shima_v3.xml"
    "etc/media_codecs_performance_yupik_v0.xml"
    "etc/media_codecs_performance_yupik_v1.xml"
    "etc/media_codecs_shima_v1.xml"
    "etc/media_codecs_shima_v2.xml"
    "etc/media_codecs_shima_v3.xml"
    "etc/media_codecs_yupik_v0.xml"
    "etc/media_codecs_yupik_v1.xml"
    "etc/media_profiles_shima_v1.xml"
    "etc/media_profiles_shima_v2.xml"
    "etc/media_profiles_shima_v3.xml"
    "etc/media_profiles_yupik_v0.xml"
    "etc/media_profiles_yupik_v1.xml"
    "etc/media_shima_v1/video_system_specs.json"
    "etc/media_shima_v2/video_system_specs.json"
    "etc/media_shima_v3/video_system_specs.json"
    "etc/media_yupik_v0/video_system_specs.json"
    "etc/media_yupik_v1/video_system_specs.json"
    "bin/hw/android.hardware.cas@1.2-service"
    "etc/init/android.hardware.cas@1.2-service.rc"
    "etc/vintf/manifest/android.hardware.cas@1.2-service.xml"
    "lib/libstagefright_amrnb_common.so"
    "lib/libstagefright_bufferpool@2.0.1.so"
    "lib/libstagefright_enc_common.so"
    "lib/libstagefright_flacdec.so"
    "lib/libstagefright_soft_aacdec.so"
    "lib/libstagefright_soft_aacenc.so"
    "lib/libstagefright_soft_amrdec.so"
    "lib/libstagefright_soft_amrnbenc.so"
    "lib/libstagefright_soft_amrwbenc.so"
    "lib/libstagefright_soft_avcdec.so"
    "lib/libstagefright_soft_avcenc.so"
    "lib/libstagefright_soft_flacdec.so"
    "lib/libstagefright_soft_flacenc.so"
    "lib/libstagefright_soft_g711dec.so"
    "lib/libstagefright_soft_gsmdec.so"
    "lib/libstagefright_soft_hevcdec.so"
    "lib/libstagefright_soft_mp3dec.so"
    "lib/libstagefright_soft_mpeg2dec.so"
    "lib/libstagefright_soft_mpeg4dec.so"
    "lib/libstagefright_soft_mpeg4enc.so"
    "lib/libstagefright_soft_opusdec.so"
    "lib/libstagefright_soft_qtiflacdec.so"
    "lib/libstagefright_soft_rawdec.so"
    "lib/libstagefright_soft_vorbisdec.so"
    "lib/libstagefright_soft_vpxdec.so"
    "lib/libstagefright_soft_vpxenc.so"
    "lib/libstagefright_softomx.so"
    "lib/libstagefright_softomx_plugin.so"
    "lib/libstagefrighthw.so"
    "lib/vndk/libstagefright_foundation.so"
    "lib/vndk/libstagefright_omx.so"
    "lib/libOmxAacEnc.so"
    "lib/libOmxAmrEnc.so"
    "lib/libOmxCore.so"
    "lib/libOmxEvrcEnc.so"
    "lib/libOmxG711Enc.so"
    "lib/libOmxQcelp13Enc.so"
    "lib/libOmxVideoDSMode.so"
    "lib64/libstagefright_bufferpool@2.0.1.so"
    "lib64/libstagefright_soft_qtiflacdec.so"
    "lib64/libstagefright_softomx.so"
    "lib64/libstagefrighthw.so"
    "lib64/libOmxAacEnc.so"
    "lib64/libOmxAmrEnc.so"
    "lib64/libOmxCore.so"
    "lib64/libOmxEvrcEnc.so"
    "lib64/libOmxG711Enc.so"
    "lib64/libOmxQcelp13Enc.so"
    "lib/libplatformconfig.so"
    "lib64/libplatformconfig.so"

    # Modules
    "lib/modules/5.4-gki/adsp_loader_dlkm.ko"
    "lib/modules/5.4-gki/altmode-glink.ko"
    "lib/modules/5.4-gki/apr_dlkm.ko"
    "lib/modules/5.4-gki/atmel_mxt_ts.ko"
    "lib/modules/5.4-gki/bolero_cdc_dlkm.ko"
    "lib/modules/5.4-gki/bt_fm_slim.ko"
    "lib/modules/5.4-gki/btpower.ko"
    "lib/modules/5.4-gki/camcc-lahaina.ko"
    "lib/modules/5.4-gki/camcc-shima.ko"
    "lib/modules/5.4-gki/camcc-yupik.ko"
    "lib/modules/5.4-gki/camera.ko"
    "lib/modules/5.4-gki/cdsp-loader.ko"
    "lib/modules/5.4-gki/cdsprm.ko"
    "lib/modules/5.4-gki/clk-aop-qmp.ko"
    "lib/modules/5.4-gki/cnss2.ko"
    "lib/modules/5.4-gki/cnss_nl.ko"
    "lib/modules/5.4-gki/cnss_prealloc.ko"
    "lib/modules/5.4-gki/cnss_utils.ko"
    "lib/modules/5.4-gki/core_hang_detect.ko"
    "lib/modules/5.4-gki/dispcc-lahaina.ko"
    "lib/modules/5.4-gki/dispcc-shima.ko"
    "lib/modules/5.4-gki/dispcc-yupik.ko"
    "lib/modules/5.4-gki/dwc3-haps.ko"
    "lib/modules/5.4-gki/dwc3-msm.ko"
    "lib/modules/5.4-gki/dwc3-of-simple.ko"
    "lib/modules/5.4-gki/dwc3-qcom.ko"
    "lib/modules/5.4-gki/dwc3.ko"
    "lib/modules/5.4-gki/ehset.ko"
    "lib/modules/5.4-gki/epss-l3.ko"
    "lib/modules/5.4-gki/eud.ko"
    "lib/modules/5.4-gki/extcon-usb-gpio.ko"
    "lib/modules/5.4-gki/focaltech_fts.ko"
    "lib/modules/5.4-gki/frpc-adsprpc.ko"
    "lib/modules/5.4-gki/glink_pkt.ko"
    "lib/modules/5.4-gki/glink_probe.ko"
    "lib/modules/5.4-gki/governor_gpubw_mon.ko"
    "lib/modules/5.4-gki/governor_msm_adreno_tz.ko"
    "lib/modules/5.4-gki/gpi.ko"
    "lib/modules/5.4-gki/gpucc-lahaina.ko"
    "lib/modules/5.4-gki/gpucc-shima.ko"
    "lib/modules/5.4-gki/gpucc-yupik.ko"
    "lib/modules/5.4-gki/gsim.ko"
    "lib/modules/5.4-gki/hdcp_qseecom.ko"
    "lib/modules/5.4-gki/hh_ctrl.ko"
    "lib/modules/5.4-gki/hh_dbl.ko"
    "lib/modules/5.4-gki/hh_irq_lend.ko"
    "lib/modules/5.4-gki/hh_mem_notifier.ko"
    "lib/modules/5.4-gki/hh_msgq.ko"
    "lib/modules/5.4-gki/hh_rm_drv.ko"
    "lib/modules/5.4-gki/hh_virt_wdt.ko"
    "lib/modules/5.4-gki/hvc_haven.ko"
    "lib/modules/5.4-gki/hwmon.ko"
    "lib/modules/5.4-gki/i2c-msm-geni.ko"
    "lib/modules/5.4-gki/icm206xx.ko"
    "lib/modules/5.4-gki/icnss2.ko"
    "lib/modules/5.4-gki/ipa_clientsm.ko"
    "lib/modules/5.4-gki/ipa_fmwk.ko"
    "lib/modules/5.4-gki/ipam.ko"
    "lib/modules/5.4-gki/leds-qpnp-vibrator-ldo.ko"
    "lib/modules/5.4-gki/leds-qti-flash.ko"
    "lib/modules/5.4-gki/leds-qti-tri-led.ko"
    "lib/modules/5.4-gki/lid.ko"
    "lib/modules/5.4-gki/lid_2.ko"
    "lib/modules/5.4-gki/llcc-lahaina.ko"
    "lib/modules/5.4-gki/llcc-shima.ko"
    "lib/modules/5.4-gki/llcc-slice.ko"
    "lib/modules/5.4-gki/llcc-yupik.ko"
    "lib/modules/5.4-gki/lvstest.ko"
    "lib/modules/5.4-gki/machine_dlkm.ko"
    "lib/modules/5.4-gki/mbhc_dlkm.ko"
    "lib/modules/5.4-gki/mhi_bus.ko"
    "lib/modules/5.4-gki/mhi_uci.ko"
    "lib/modules/5.4-gki/microdump_collector.ko"
    "lib/modules/5.4-gki/modules.alias"
    "lib/modules/5.4-gki/modules.blocklist"
    "lib/modules/5.4-gki/modules.dep"
    "lib/modules/5.4-gki/modules.load"
    "lib/modules/5.4-gki/modules.softdep"
    "lib/modules/5.4-gki/msm-cvp.ko"
    "lib/modules/5.4-gki/msm-geni-se.ko"
    "lib/modules/5.4-gki/msm-vidc.ko"
    "lib/modules/5.4-gki/msm_dma_iommu_mapping.ko"
    "lib/modules/5.4-gki/msm_drm.ko"
    "lib/modules/5.4-gki/msm_geni_serial.ko"
    "lib/modules/5.4-gki/msm_glink_ssr.ko"
    "lib/modules/5.4-gki/msm_ion_heaps.ko"
    "lib/modules/5.4-gki/msm_kgsl.ko"
    "lib/modules/5.4-gki/msm_performance.ko"
    "lib/modules/5.4-gki/msm_qmp.ko"
    "lib/modules/5.4-gki/msm_rng.ko"
    "lib/modules/5.4-gki/msm_sharedmem.ko"
    "lib/modules/5.4-gki/native_dlkm.ko"
    "lib/modules/5.4-gki/ns.ko"
    "lib/modules/5.4-gki/nvmem_qfprom.ko"
    "lib/modules/5.4-gki/nvt_36xxx.ko"
    "lib/modules/5.4-gki/pci-msm-drv.ko"
    "lib/modules/5.4-gki/peripheral-loader.ko"
    "lib/modules/5.4-gki/phy-generic.ko"
    "lib/modules/5.4-gki/phy-msm-snps-hs.ko"
    "lib/modules/5.4-gki/phy-msm-ssusb-qmp.ko"
    "lib/modules/5.4-gki/phy-qcom-emu.ko"
    "lib/modules/5.4-gki/phy-qcom-ufs-qmp-14nm.ko"
    "lib/modules/5.4-gki/phy-qcom-ufs-qmp-v3-660.ko"
    "lib/modules/5.4-gki/phy-qcom-ufs-qmp-v3.ko"
    "lib/modules/5.4-gki/phy-qcom-ufs-qmp-v4.ko"
    "lib/modules/5.4-gki/pinctrl-spmi-gpio.ko"
    "lib/modules/5.4-gki/pinctrl-spmi-mpp.ko"
    "lib/modules/5.4-gki/pinctrl_lpi_dlkm.ko"
    "lib/modules/5.4-gki/pinctrl_wcd_dlkm.ko"
    "lib/modules/5.4-gki/platform_dlkm.ko"
    "lib/modules/5.4-gki/pmic-pon-log.ko"
    "lib/modules/5.4-gki/pmic_glink.ko"
    "lib/modules/5.4-gki/pwm-qti-lpg.ko"
    "lib/modules/5.4-gki/q6_dlkm.ko"
    "lib/modules/5.4-gki/q6_notifier_dlkm.ko"
    "lib/modules/5.4-gki/q6_pdr_dlkm.ko"
    "lib/modules/5.4-gki/qca_cld3_qca6390.ko"
    "lib/modules/5.4-gki/qca_cld3_qca6750.ko"
    "lib/modules/5.4-gki/qca_cld3_wlan.ko"
    "lib/modules/5.4-gki/qce50.ko"
    "lib/modules/5.4-gki/qcedev-mod.ko"
    "lib/modules/5.4-gki/qcom-cpufreq-hw.ko"
    "lib/modules/5.4-gki/qcom-dload-mode.ko"
    "lib/modules/5.4-gki/qcom-hv-haptics.ko"
    "lib/modules/5.4-gki/qcom-i2c-pmic.ko"
    "lib/modules/5.4-gki/qcom-reboot-reason.ko"
    "lib/modules/5.4-gki/qcom-spmi-adc5.ko"
    "lib/modules/5.4-gki/qcom-spmi-pmic.ko"
    "lib/modules/5.4-gki/qcom-spmi-sdam.ko"
    "lib/modules/5.4-gki/qcom-spmi-temp-alarm.ko"
    "lib/modules/5.4-gki/qcom-spmi-wled.ko"
    "lib/modules/5.4-gki/qcom-vadc-common.ko"
    "lib/modules/5.4-gki/qcom_glink_native.ko"
    "lib/modules/5.4-gki/qcom_glink_smem.ko"
    "lib/modules/5.4-gki/qcom_glink_spss.ko"
    "lib/modules/5.4-gki/qcom_hwspinlock.ko"
    "lib/modules/5.4-gki/qcom_ipcc.ko"
    "lib/modules/5.4-gki/qcom_pm8008-regulator.ko"
    "lib/modules/5.4-gki/qcom_proxy_of_consumer.ko"
    "lib/modules/5.4-gki/qcom_soc_wdt.ko"
    "lib/modules/5.4-gki/qcom_wdt_core.ko"
    "lib/modules/5.4-gki/qfprom-sys.ko"
    "lib/modules/5.4-gki/qmi_helpers.ko"
    "lib/modules/5.4-gki/qpnp-amoled-regulator.ko"
    "lib/modules/5.4-gki/qpnp-lcdb-regulator.ko"
    "lib/modules/5.4-gki/qpnp-pbs.ko"
    "lib/modules/5.4-gki/qrtr-haven.ko"
    "lib/modules/5.4-gki/qrtr-mhi.ko"
    "lib/modules/5.4-gki/qrtr-smd.ko"
    "lib/modules/5.4-gki/qrtr.ko"
    "lib/modules/5.4-gki/qsee_ipc_irq.ko"
    "lib/modules/5.4-gki/qsee_ipc_irq_bridge.ko"
    "lib/modules/5.4-gki/qseecom-mod.ko"
    "lib/modules/5.4-gki/qti-fixed-regulator.ko"
    "lib/modules/5.4-gki/qti_amoled_ecm.ko"
    "lib/modules/5.4-gki/qti_battery_charger.ko"
    "lib/modules/5.4-gki/qti_battery_debug.ko"
    "lib/modules/5.4-gki/rdbg.ko"
    "lib/modules/5.4-gki/regmap-spmi.ko"
    "lib/modules/5.4-gki/rmnet_core.ko"
    "lib/modules/5.4-gki/rmnet_ctl.ko"
    "lib/modules/5.4-gki/rmnet_offload.ko"
    "lib/modules/5.4-gki/rmnet_shs.ko"
    "lib/modules/5.4-gki/rndisipam.ko"
    "lib/modules/5.4-gki/rtc-pm8xxx.ko"
    "lib/modules/5.4-gki/rx_macro_dlkm.ko"
    "lib/modules/5.4-gki/sensors_ssc.ko"
    "lib/modules/5.4-gki/sensors_vcnl36866.ko"
    "lib/modules/5.4-gki/service-locator.ko"
    "lib/modules/5.4-gki/service-notifier.ko"
    "lib/modules/5.4-gki/sg.ko"
    "lib/modules/5.4-gki/slimbus-ngd.ko"
    "lib/modules/5.4-gki/slimbus.ko"
    "lib/modules/5.4-gki/smcinvoke.ko"
    "lib/modules/5.4-gki/smem.ko"
    "lib/modules/5.4-gki/smp2p.ko"
    "lib/modules/5.4-gki/smp2p_sleepstate.ko"
    "lib/modules/5.4-gki/smsm.ko"
    "lib/modules/5.4-gki/snd-usb-audio-qmi.ko"
    "lib/modules/5.4-gki/snd_event_dlkm.ko"
    "lib/modules/5.4-gki/socinfo.ko"
    "lib/modules/5.4-gki/spcom.ko"
    "lib/modules/5.4-gki/spi-msm-geni.ko"
    "lib/modules/5.4-gki/spmi-glink-debug.ko"
    "lib/modules/5.4-gki/spmi-pmic-arb-debug.ko"
    "lib/modules/5.4-gki/spmi-pmic-arb.ko"
    "lib/modules/5.4-gki/sps_drv.ko"
    "lib/modules/5.4-gki/spss_utils.ko"
    "lib/modules/5.4-gki/ssusb-redriver-nb7vpq904m.ko"
    "lib/modules/5.4-gki/stub_dlkm.ko"
    "lib/modules/5.4-gki/subsys-pil-tz.ko"
    "lib/modules/5.4-gki/subsystem_restart.ko"
    "lib/modules/5.4-gki/swr_ctrl_dlkm.ko"
    "lib/modules/5.4-gki/swr_dlkm.ko"
    "lib/modules/5.4-gki/swr_dmic_dlkm.ko"
    "lib/modules/5.4-gki/swr_haptics_dlkm.ko"
    "lib/modules/5.4-gki/synx-driver.ko"
    "lib/modules/5.4-gki/texfat.ko"
    "lib/modules/5.4-gki/tntfs.ko"
    "lib/modules/5.4-gki/tx_macro_dlkm.ko"
    "lib/modules/5.4-gki/typec_ucsi.ko"
    "lib/modules/5.4-gki/u_audio.ko"
    "lib/modules/5.4-gki/ucsi_glink.ko"
    "lib/modules/5.4-gki/usb_bam.ko"
    "lib/modules/5.4-gki/usb_f_ccid.ko"
    "lib/modules/5.4-gki/usb_f_cdev.ko"
    "lib/modules/5.4-gki/usb_f_diag.ko"
    "lib/modules/5.4-gki/usb_f_gsi.ko"
    "lib/modules/5.4-gki/usb_f_qdss.ko"
    "lib/modules/5.4-gki/usb_f_uac2.ko"
    "lib/modules/5.4-gki/usbtouchscreen.ko"
    "lib/modules/5.4-gki/va_macro_dlkm.ko"
    "lib/modules/5.4-gki/videocc-lahaina.ko"
    "lib/modules/5.4-gki/videocc-shima.ko"
    "lib/modules/5.4-gki/videocc-yupik.ko"
    "lib/modules/5.4-gki/wcd937x_dlkm.ko"
    "lib/modules/5.4-gki/wcd937x_slave_dlkm.ko"
    "lib/modules/5.4-gki/wcd938x_dlkm.ko"
    "lib/modules/5.4-gki/wcd938x_slave_dlkm.ko"
    "lib/modules/5.4-gki/wcd9xxx_dlkm.ko"
    "lib/modules/5.4-gki/wcd_core_dlkm.ko"
    "lib/modules/5.4-gki/wlan_firmware_service_v01.ko"
    "lib/modules/5.4-gki/wsa883x_dlkm.ko"
    "lib/modules/5.4-gki/wsa_macro_dlkm.ko"
    "lib/modules/5.4-gki/xhci-hcd.ko"
    "lib/modules/5.4-gki/xhci-pci.ko"
    "lib/modules/5.4-gki/xhci-plat-hcd.ko"
    "lib/modules/adsp_loader_dlkm.ko"
    "lib/modules/apr_dlkm.ko"
    "lib/modules/aw8697.ko"
    "lib/modules/bolero_cdc_dlkm.ko"
    "lib/modules/bt_fm_slim.ko"
    "lib/modules/btpower.ko"
    "lib/modules/camera.ko"
    "lib/modules/cs35l45_i2c_dlkm.ko"
    "lib/modules/e4000.ko"
    "lib/modules/fc0011.ko"
    "lib/modules/fc0012.ko"
    "lib/modules/fc0013.ko"
    "lib/modules/fc2580.ko"
    "lib/modules/focaltech_fts_zf.ko"
    "lib/modules/gf_spi.ko"
    "lib/modules/hdmi_dlkm.ko"
    "lib/modules/hid-aksys.ko"
    "lib/modules/icm206xx.ko"
    "lib/modules/it913x.ko"
    "lib/modules/lid.ko"
    "lib/modules/lid_2.ko"
    "lib/modules/llcc_perfmon.ko"
    "lib/modules/m88rs6000t.ko"
    "lib/modules/machine_dlkm.ko"
    "lib/modules/max2165.ko"
    "lib/modules/mbhc_dlkm.ko"
    "lib/modules/mc44s803.ko"
    "lib/modules/modules.alias"
    "lib/modules/modules.dep"
    "lib/modules/modules.load"
    "lib/modules/modules.softdep"
    "lib/modules/msi001.ko"
    "lib/modules/msm_drm.ko"
    "lib/modules/mt2060.ko"
    "lib/modules/mt2063.ko"
    "lib/modules/mt20xx.ko"
    "lib/modules/mt2131.ko"
    "lib/modules/mt2266.ko"
    "lib/modules/mxl301rf.ko"
    "lib/modules/mxl5005s.ko"
    "lib/modules/mxl5007t.ko"
    "lib/modules/native_dlkm.ko"
    "lib/modules/pinctrl_lpi_dlkm.ko"
    "lib/modules/pinctrl_wcd_dlkm.ko"
    "lib/modules/platform_dlkm.ko"
    "lib/modules/q6_dlkm.ko"
    "lib/modules/q6_notifier_dlkm.ko"
    "lib/modules/q6_pdr_dlkm.ko"
    "lib/modules/qca_cld3_qca6390.ko"
    "lib/modules/qca_cld3_qca6750.ko"
    "lib/modules/qca_cld3_wlan.ko"
    "lib/modules/qcom_edac.ko"
    "lib/modules/qm1d1b0004.ko"
    "lib/modules/qm1d1c0042.ko"
    "lib/modules/qt1010.ko"
    "lib/modules/r820t.ko"
    "lib/modules/rdbg.ko"
    "lib/modules/rmnet_core.ko"
    "lib/modules/rmnet_ctl.ko"
    "lib/modules/rmnet_offload.ko"
    "lib/modules/rmnet_shs.ko"
    "lib/modules/rx_macro_dlkm.ko"
    "lib/modules/sensors_vcnl36866.ko"
    "lib/modules/si2157.ko"
    "lib/modules/sla.ko"
    "lib/modules/slimbus-ngd.ko"
    "lib/modules/slimbus.ko"
    "lib/modules/snd-soc-es928x.ko"
    "lib/modules/snd_event_dlkm.ko"
    "lib/modules/stub_dlkm.ko"
    "lib/modules/swr_ctrl_dlkm.ko"
    "lib/modules/swr_dlkm.ko"
    "lib/modules/swr_dmic_dlkm.ko"
    "lib/modules/swr_haptics_dlkm.ko"
    "lib/modules/sx932x_sake.ko"
    "lib/modules/tda18212.ko"
    "lib/modules/tda18218.ko"
    "lib/modules/tda18250.ko"
    "lib/modules/tda9887.ko"
    "lib/modules/tea5761.ko"
    "lib/modules/tea5767.ko"
    "lib/modules/texfat.ko"
    "lib/modules/tntfs.ko"
    "lib/modules/tua9001.ko"
    "lib/modules/tuner-simple.ko"
    "lib/modules/tuner-types.ko"
    "lib/modules/tuner-xc2028.ko"
    "lib/modules/tx_macro_dlkm.ko"
    "lib/modules/va_macro_dlkm.ko"
    "lib/modules/wcd937x_dlkm.ko"
    "lib/modules/wcd937x_slave_dlkm.ko"
    "lib/modules/wcd938x_dlkm.ko"
    "lib/modules/wcd938x_slave_dlkm.ko"
    "lib/modules/wcd9xxx_dlkm.ko"
    "lib/modules/wcd_core_dlkm.ko"
    "lib/modules/wsa883x_dlkm.ko"
    "lib/modules/wsa_macro_dlkm.ko"
    "lib/modules/xc4000.ko"
    "lib/modules/xc5000.ko"

    # Other services
    "bin/asus_osinfo"
    "bin/hw/android.hardware.atrace@1.0-service"
    "etc/init/android.hardware.atrace@1.0-service.rc"
    "etc/vintf/manifest/android.hardware.atrace@1.0-service.xml"
    "bin/hw/android.hardware.drm@1.3-service.clearkey"
    "etc/init/android.hardware.drm@1.3-service.clearkey.rc"
    "etc/vintf/manifest/manifest_android.hardware.drm@1.3-service.clearkey.xml"
    "bin/hw/android.hardware.health@2.1-service"
    "etc/init/android.hardware.health@2.1-service.rc"
    "etc/vintf/manifest/android.hardware.health@2.1.xml"
    "lib/hw/android.hardware.health@2.0-impl-2.1-qti.so"
    "lib64/hw/android.hardware.health@2.0-impl-2.1-qti.so"
    "lib/mediacas/libclearkeycasplugin.so"
    "lib64/mediacas/libclearkeycasplugin.so"
    "lib/mediadrm/libdrmclearkeyplugin.so"
    "lib64/mediadrm/libdrmclearkeyplugin.so"
    "bin/netutild"
    "etc/init/netutild.rc"
    "bin/hw/vendor.asus.wifi.netutil@1.0-service"
    "etc/init/vendor.asus.wifi.netutil@1.0-service.rc"
    "lib64/vendor.asus.wifi.netutil@1.0.so"
    "bin/hw/vendor.ims.glovemode@1.0-service"
    "etc/init/vendor.ims.glovemode@1.0-service.rc"
    "lib64/vendor.ims.glovemode@1.0.so"
    "bin/hw/vendor.ims.zenmotion@1.0-service"
    "etc/init/vendor.ims.zenmotion@1.0-service.rc"
    "lib64/vendor.ims.zenmotion@1.0.so"
    "bin/hw/vendor.ims.airtrigger@1.2-service"
    "etc/init/vendor.ims.airtrigger@1.2-service.rc"
    "lib64/vendor.ims.airtrigger@1.0.so"
    "lib64/vendor.ims.airtrigger@1.1.so"
    "lib64/vendor.ims.airtrigger@1.2.so"
    "bin/hw/vendor.ims.twinviewdock@1.0-service"
    "etc/init/vendor.ims.twinviewdock@1.0-service.rc"
    "lib64/vendor.ims.twinviewdock@1.0.so"
    "bin/hw/vendor.ims.wifiantennamode@1.0-service"
    "etc/init/vendor.ims.wifiantennamode@1.0-service.rc"
    "lib64/vendor.ims.wifiantennamode@1.0.so"
    "etc/init/vendor_flash_recovery.rc"
    "etc/init/vndservicemanager.rc"
    "bin/vndservice"
    "bin/vndservicemanager"
    "etc/ftm_test_config"
    "etc/ftm_test_config_lahaina-hdk-snd-card"
    "etc/ftm_test_config_lahaina-hhg-snd-card"
    "etc/ftm_test_config_lahaina-qrd-snd-card"
    "etc/ftm_test_config_lahaina-shimaidp-snd-card"
    "etc/ftm_test_config_lahaina-shimaidps-snd-card"
    "etc/ftm_test_config_lahaina-shimaqrd-snd-card"
    "etc/ftm_test_config_lahaina-yupikidp-snd-card"
    "etc/ftm_test_config_lahaina-yupikqrd-snd-card"
    "etc/face3d/qcnn_concat_file_model-0324_2_encrypted"
    "lib/libFace3DTA.so"
    "lib/libFace3D_hlos.so"
    "lib64/libFace3DTA.so"
    "lib64/libFace3D_hlos.so"
    "lib/libhwbinder.so"
    "lib64/libhwbinder.so"
    "lib64/libavservices_minijail.so"
    "lib64/libavservices_minijail.so"
    "lib64/libavservices_minijail_vendor.so"
    "etc/init/boringssl_self_test.rc"
    "bin/hw/android.hardware.media.omx@1.0-service"
    "etc/init/android.hardware.media.omx@1.0-service.rc"
    "bin/hw/android.hardware.memtrack@1.0-service"
    "etc/init/android.hardware.memtrack@1.0-service.rc"
    "lib/hw/android.hardware.memtrack@1.0-impl.so"
    #"lib/hw/memtrack.default.so"
    "lib64/hw/android.hardware.memtrack@1.0-impl.so"
    #"lib64/hw/memtrack.default.so"

    # Overlays
    "overlay/FrameworksResTarget.apk"
    "overlay/TeleServResOverlayOdm.apk"
    "overlay/WifiResTarget.apk"
    "overlay/aptxalsOverlay.apk"

    # Rfs
    "rfs/apq/gnss/hlos"
    "rfs/apq/gnss/ramdumps"
    "rfs/apq/gnss/readonly/firmware"
    "rfs/apq/gnss/readonly/vendor/firmware"
    "rfs/apq/gnss/readwrite"
    "rfs/apq/gnss/shared"
    "rfs/mdm/adsp/hlos"
    "rfs/mdm/adsp/ramdumps"
    "rfs/mdm/adsp/readonly/firmware"
    "rfs/mdm/adsp/readonly/vendor/firmware"
    "rfs/mdm/adsp/readwrite"
    "rfs/mdm/adsp/shared"
    "rfs/mdm/cdsp/hlos"
    "rfs/mdm/cdsp/ramdumps"
    "rfs/mdm/cdsp/readonly/firmware"
    "rfs/mdm/cdsp/readwrite"
    "rfs/mdm/cdsp/shared"
    "rfs/mdm/mpss/hlos"
    "rfs/mdm/mpss/ramdumps"
    "rfs/mdm/mpss/readonly/firmware"
    "rfs/mdm/mpss/readonly/vendor/firmware"
    "rfs/mdm/mpss/readwrite"
    "rfs/mdm/mpss/shared"
    "rfs/mdm/slpi/hlos"
    "rfs/mdm/slpi/ramdumps"
    "rfs/mdm/slpi/readonly/firmware"
    "rfs/mdm/slpi/readwrite"
    "rfs/mdm/slpi/shared"
    "rfs/mdm/tn/hlos"
    "rfs/mdm/tn/ramdumps"
    "rfs/mdm/tn/readonly/firmware"
    "rfs/mdm/tn/readwrite"
    "rfs/mdm/tn/shared"
    "rfs/msm/adsp/hlos"
    "rfs/msm/adsp/ramdumps"
    "rfs/msm/adsp/readonly/firmware"
    "rfs/msm/adsp/readonly/vendor/firmware"
    "rfs/msm/adsp/readwrite"
    "rfs/msm/adsp/shared"
    "rfs/msm/cdsp/hlos"
    "rfs/msm/cdsp/ramdumps"
    "rfs/msm/cdsp/readonly/firmware"
    "rfs/msm/cdsp/readonly/vendor/firmware"
    "rfs/msm/cdsp/readwrite"
    "rfs/msm/cdsp/shared"
    "rfs/msm/mpss/hlos"
    "rfs/msm/mpss/ramdumps"
    "rfs/msm/mpss/readonly/firmware"
    "rfs/msm/mpss/readonly/vendor/firmware"
    "rfs/msm/mpss/readwrite"
    "rfs/msm/mpss/shared"
    "rfs/msm/slpi/hlos"
    "rfs/msm/slpi/ramdumps"
    "rfs/msm/slpi/readonly/firmware"
    "rfs/msm/slpi/readonly/vendor/firmware"
    "rfs/msm/slpi/readwrite"
    "rfs/msm/slpi/shared"

    # Sepolicy
    "etc/selinux/vendor_file_contexts"
    "etc/selinux/vendor_service_contexts"
    "etc/selinux/plat_sepolicy_vers.txt"
    "etc/selinux/vndservice_contexts"
    "etc/selinux/plat_pub_versioned.cil"
    "etc/selinux/vendor_hwservice_contexts"
    "etc/selinux/vendor_mac_permissions.xml"
    "etc/selinux/vendor_property_contexts"
    "etc/selinux/vendor_seapp_contexts"
    "etc/selinux/vendor_sepolicy.cil"
    "etc/selinux/selinux_denial_metadata"

    # Symlink
    "factory"
    "odm"

    # Vibrator
    "bin/hw/vendor.asus.vibrator.vibratorgovern@1.0-service"
    "etc/init/vendor.asus.vibrator.vibratorgovern@1.0-service.rc"
    "lib/vendor.asus.vibrator.vibratorgovern@1.0.so"
    "lib64/vendor.asus.vibrator.vibratorgovern@1.0.so"
    "lib/hw/vendor.asus.vibrator.vibratorgovern@1.0-impl.so"
    "lib64/hw/vendor.asus.vibrator.vibratorgovern@1.0-impl.so"
    "bin/hw/vendor.qti.hardware.vibrator.service"
    "etc/init/init.aw8697.rc"
    "etc/init/vendor.qti.hardware.vibrator.service.rc"
    "etc/vintf/manifest/vendor.qti.hardware.vibrator.service.xml"
    "lib64/vendor.qti.hardware.vibrator.impl.so"
    "lib64/libqtivibratoreffect.so"
    "lib/hw/vibrator.default.so"
    "lib64/hw/vibrator.default.so"

    # Wifi
    "bin/hw/android.hardware.wifi@1.0-service"
    "etc/init/android.hardware.wifi@1.0-service.rc"
    "etc/vintf/manifest/android.hardware.wifi@1.0-service.xml"
    "bin/wifistresstest.sh"
    "etc/init/vendor.qti.hardware.wifi.wifilearner@1.0-service.rc"
    "lib64/vendor.qti.hardware.wifi.wifilearner@1.0.so"
    "etc/vintf/manifest/android.hardware.wifi.hostapd.xml"
    "lib64/vendor.asus.wifi.hostapd@1.0.so"
    "bin/hostapd_cli"
    "bin/hw/hostapd"
    "etc/hostapd/hostapd.accept"
    "etc/hostapd/hostapd.deny"
    "etc/hostapd/hostapd_default.conf"
    "etc/init/hostapd.android.rc"
    "etc/wifi/qca6390/WCNSS_qcom_cfg.ini"
    "etc/wifi/qca6750/WCNSS_qcom_cfg.ini"
    "bin/fstman"
    "etc/init/vendor.qti.hardware.fstman@1.0-service.rc"
    "etc/wifi/fstman.ini"
    "lib64/vendor.qti.hardware.fstman@1.0.so"
    "etc/wifi/aoa_cldb_falcon.bin"
    "etc/wifi/aoa_cldb_swl14.bin"
    "etc/wifi/icm.conf"
    "bin/qsh_wifi_test"
    "bin/wifilearner"
    "bin/hw/wpa_supplicant"
    "etc/init/android.hardware.wifi.supplicant-service.rc"
    "lib64/libkeystore-engine-wifi-hidl.so"
    "lib64/libkeystore-wifi-hidl.so"
    "lib/libwifi-hal-ctrl.so"
    "lib/libwifi-hal-qcom.so"
    "lib/libwpa_client.so"
    "lib64/libwpa_client.so"
    "lib64/libwifi-hal.so"
    "lib64/libwifi-hal-ctrl.so"
    "lib64/libwifi-hal-qcom.so"
    "lib/libxtwifi_server_protocol.so"
    "lib/libxtwifi_server_protocol_uri_v3.so"
    "lib64/libxtwifi_server_protocol.so"
    "lib64/libxtwifi_server_protocol_uri_v3.so"

)
ALL_SKIP_FILES=("${VENDOR_SKIP_FILES_COMMON[@]}" "${VENDOR_SKIP_FILES_DEVICE[@]}")

generate_prop_list_from_image "$1" "$2" ALL_SKIP_FILES

# Fixups
_output_file=$2
function presign() {
    sed -i "s|vendor/$1$|vendor/$1;PRESIGNED|g" $_output_file
}
function as_module() {
    sed -i "s|vendor/$1$|-vendor/$1|g" $_output_file
}

presign "app/com.qualcomm.qti.gpudrivers.lahaina.api30/com.qualcomm.qti.gpudrivers.lahaina.api30.apk"
as_module "etc/vintf/manifest/android.hardware.gnss@2.1-service-qti.xml"
as_module "etc/vintf/manifest/android.hardware.graphics.mapper-impl-qti-display.xml"
as_module "etc/vintf/manifest/android.hardware.lights-qti.xml"
as_module "etc/vintf/manifest/android.hardware.neuralnetworks@1.3-service-qti.xml"
as_module "etc/vintf/manifest/android.hardware.sensors@2.0-multihal.xml"
as_module "etc/vintf/manifest/android.hardware.thermal@2.0-service.qti.xml"
as_module "etc/vintf/manifest/android.hardware.usb@1.2-service.xml"
as_module "etc/vintf/manifest/c2_manifest_vendor.xml"
as_module "etc/vintf/manifest/manifest_android.hardware.drm@1.3-service.widevine.xml"
as_module "etc/vintf/manifest/power.xml"
as_module "etc/vintf/manifest/vendor.pixelworks.hardware.display.iris-service.xml"
as_module "etc/vintf/manifest/vendor.pixelworks.hardware.feature.irisfeature-service.xml"
as_module "etc/vintf/manifest/vendor.qti.diag.hal.service.xml"
as_module "etc/vintf/manifest/vendor.qti.gnss@4.0-service.xml"
as_module "etc/vintf/manifest/vendor.qti.hardware.display.allocator-service.xml"
as_module "etc/vintf/manifest/vendor.qti.hardware.display.composer-service.xml"
as_module "etc/vintf/manifest/vendor.qti.hardware.servicetracker@1.2-service.xml"

